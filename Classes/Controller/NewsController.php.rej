--- Classes/Controller/NewsController.php	(date 1612102623373)
+++ Classes/Controller/NewsController.php	(date 1612102623373)
@@ -12,6 +12,7 @@
  *
  */
 
+use Mediadreams\MdNewsfrontend\Property\TypeConverters\MyPersistentObjectConverter;
 use TYPO3\CMS\Core\Messaging\AbstractMessage;
 use TYPO3\CMS\Core\Utility\GeneralUtility;
 
@@ -32,7 +33,8 @@
      */
     public function listAction()
     {
-        $news = $this->newsRepository->findByTxMdNewsfrontendFeuser($this->feuserUid);
+        $news = $this->newsRepository->findByFeuserId($this->feuserUid, $this->settings['allowNotEnabledNews']);
+//        $news = $this->newsRepository->findByTxMdNewsfrontendFeuser($this->feuserUid);
         $this->view->assign('news', $news);
     }
 
@@ -82,14 +84,14 @@
 
         // add signal slot BeforeSave
         $this->signalSlotDispatcher->dispatch(
-            __CLASS__, 
-            __FUNCTION__ . 'BeforeSave', 
+            __CLASS__,
+            __FUNCTION__ . 'BeforeSave',
             [$newNews, $this]
         );
 
         $this->newsRepository->add($newNews);
         $persistenceManager = $this->objectManager->get(PersistenceManager::class);
- 
+
         // persist news entry in order to get the uid of the entry
         $persistenceManager->persistAll();
 
@@ -106,22 +108,35 @@
 
         // add signal slot AfterPersist
         $this->signalSlotDispatcher->dispatch(
-            __CLASS__, 
-            __FUNCTION__ . 'AfterPersist', 
+            __CLASS__,
+            __FUNCTION__ . 'AfterPersist',
             [$newNews, $this]
         );
-        
+
         $this->clearNewsCache($newNews->getUid(), $newNews->getPid());
 
         $this->addFlashMessage(
             LocalizationUtility::translate('controller.new_success','md_newsfrontend'),
-            '', 
+            '',
             AbstractMessage::OK
         );
 
         $this->redirect('list');
     }
 
+    /**
+     * Initialize edit action
+     * Add custom validator for file upload
+     *
+     * @return void
+     */
+    public function initializeEditAction()
+    {
+        $this->arguments->getArgument('news')
+            ->getPropertyMappingConfiguration()
+            ->setTypeConverter($this->objectManager->get(MyPersistentObjectConverter::class));
+    }
+
     /**
      * action edit
      *
@@ -132,7 +147,7 @@
     public function editAction(\Mediadreams\MdNewsfrontend\Domain\Model\News $news)
     {
         $this->checkAccess($news);
-        
+
         $this->view->assignMultiple(
             [
                 'news' => $news,
@@ -180,15 +199,15 @@
                 $news->$removeMethod($news->$getFirstMethod());
             }
         }
-        
+
 
         // handle the fileupload
         $this->initializeFileUpload($requestArguments, $news);
 
         // add signal slot BeforeSave
         $this->signalSlotDispatcher->dispatch(
-            __CLASS__, 
-            __FUNCTION__ . 'BeforeSave', 
+            __CLASS__,
+            __FUNCTION__ . 'BeforeSave',
             [$news, $this]
         );
 
@@ -197,7 +216,7 @@
 
         $this->addFlashMessage(
             LocalizationUtility::translate('controller.edit_success','md_newsfrontend'),
-            '', 
+            '',
             AbstractMessage::OK
         );
 
@@ -216,8 +235,8 @@
 
         // add signal slot BeforeSave
         $this->signalSlotDispatcher->dispatch(
-            __CLASS__, 
-            __FUNCTION__ . 'BeforeDelete', 
+            __CLASS__,
+            __FUNCTION__ . 'BeforeDelete',
             [$news, $this]
         );
 
@@ -227,7 +246,7 @@
 
         $this->addFlashMessage(
             LocalizationUtility::translate('controller.delete_success','md_newsfrontend'),
-            '', 
+            '',
             AbstractMessage::OK
         );
 
